# Story 3.1: Restaurant Order Management

## Status

Draft

## Story

**As a** restaurant operator,
**I want** to receive new order notifications and update order status through a simple interface,
**so that** clients and delivery partners are always informed.

## Acceptance Criteria

1. Restaurants receive real-time notifications for new orders.
2. Restaurants can set order status: Accepted, Preparing, Ready for Pickup, Canceled.
3. Status updates are reflected to the client (chat UI) and delivery partner flows.
4. Audit/log of status changes is stored with timestamp and actor (restaurant).
5. Invalid status transitions are blocked with a clear error message.

## Tasks / Subtasks

- [ ] New order notification (AC: 1)
  - [ ] Subscribe restaurant dashboard/session to order events
  - [ ] Visual + audible cue for new order arrival
- [ ] Status management UI (AC: 2)
  - [ ] Buttons/actions to change status with confirmation
  - [ ] Guard against invalid transitions
- [ ] Propagation (AC: 3)
  - [ ] Emit events/updates to client chat and delivery partner app
  - [ ] Ensure idempotent updates
- [ ] Audit logging (AC: 4)
  - [ ] Persist status change entries {orderId, old, new, at, by}

## Dev Notes

- Source reference:
  - `docs/architecture/high-level-architecture.md` (events/queues, real-time updates)
- Keep UI minimal; focus on functional status flow.
- Do not bind to a specific UI framework yet; define `RestaurantOrderService` interface.

### Testing

- Simulate new order event and verify notification.
- Validate allowed/blocked status transitions (e.g., Ready â†’ Preparing is blocked).
- Confirm client and delivery partner receive updates.

## Change Log

| Date | Version | Description | Author |
| :--- | :------ | :---------- | :----- |
| 2025-08-15 | 1.0 | Initial draft of Story 3.1 | PO |

## Dev Agent Record

### Agent Model Used



### Debug Log References



### Completion Notes List

