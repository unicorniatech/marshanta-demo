# Story 2.3: Real-time Tracking (Map + Status via Chat)

## Status
Completed

## Story

**As a** client,
**I want** to ask Marshanta for updates on my order and see my delivery on a live map,
**so that** I feel informed and reassured about progress.

## Acceptance Criteria

1. An order's delivery status can be tracked in near real time.
2. The client app renders a map and updates the driver's location as events stream in.
3. The system uses an SSE/WebSocket mechanism to push updates without polling.
4. Tracking gracefully completes when the order is fulfilled or the stream ends.

## Tasks / Subtasks

- [x] API SSE endpoint for order tracking (`GET /tracking/:orderId/stream`) implemented in `apps/api/src/routes/tracking.js`.
- [x] Client EventSource listener to update UI in `apps/web/main.js` (`trackOrder()` and SSE handlers).
- [x] Map visualization via Leaflet with live marker updates; elements in `apps/web/index.html` (`#map`, status/coords labels).
- [x] Stop/cleanup tracking via `stopTracking()` and UI button.
- [x] Error/edge-case handling: sets status to "Connection error" on SSE error and resets map on stop.

## Dev Notes

- Source reference:
  - `docs/architecture/high-level-architecture.md` (real-time updates, websockets/streams)
  - `docs/front-end-spec/introduction.md` (UX tone and reassurance)
- Keep responses concise; avoid overloading the chat with repeated updates.
- Do not commit to a map provider here; define a `MapAdapter` interface.

### Testing

- Simulated delivery location stream; verify map updates and chat status changes.
- Edge cases: no GPS, delayed updates, order canceled.

## Change Log

| Date | Version | Description | Author |
| :--- | :------ | :---------- | :----- |
| 2025-08-15 | 1.0 | Initial draft of Story 2.3 | PO |

## Dev Agent Record

### Agent Model Used



### Debug Log References



### Completion Notes List

