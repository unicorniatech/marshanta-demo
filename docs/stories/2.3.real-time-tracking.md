# Story 2.3: Real-time Tracking (Map + Status via Chat)

## Status

Draft

## Story

**As a** client,
**I want** to ask Marshanta for updates on my order and see my delivery on a live map,
**so that** I feel informed and reassured about progress.

## Acceptance Criteria

1. Users can ask "Where is my order?" and receive current status (e.g., Accepted, Preparing, Ready, On the way, Arriving).
2. A live map view is displayed within the PWA showing the delivery partner's location during delivery.
3. Status updates are personalized and reference ETA windows.
4. If location is temporarily unavailable, the system provides a graceful fallback message and last known status.

## Tasks / Subtasks

- [ ] Order status query intent (AC: 1, 3)
  - [ ] Map conversational queries to status retrieval
  - [ ] Format responses with human-friendly ETA
- [ ] Map view integration (AC: 2)
  - [ ] Embed map component in chat context or modal sheet
  - [ ] Subscribe to delivery location stream (stubbed if backend not ready)
- [ ] Fallback handling (AC: 4)
  - [ ] Detect missing/late location data and show fallback text
  - [ ] Include retry/update cadence

## Dev Notes

- Source reference:
  - `docs/architecture/high-level-architecture.md` (real-time updates, websockets/streams)
  - `docs/front-end-spec/introduction.md` (UX tone and reassurance)
- Keep responses concise; avoid overloading the chat with repeated updates.
- Do not commit to a map provider here; define a `MapAdapter` interface.

### Testing

- Simulated delivery location stream; verify map updates and chat status changes.
- Edge cases: no GPS, delayed updates, order canceled.

## Change Log

| Date | Version | Description | Author |
| :--- | :------ | :---------- | :----- |
| 2025-08-15 | 1.0 | Initial draft of Story 2.3 | PO |

## Dev Agent Record

### Agent Model Used



### Debug Log References



### Completion Notes List

