# Story 2.1: Client Onboarding (PWA + Intro Chat)

## Status

Completed

## Story

**As a** new client,
**I want** to access the Marshanta PWA, register/login, and receive a short guided intro in chat,
**so that** I can quickly start using the service.

## Acceptance Criteria

1. The PWA is installable on mobile (meets baseline PWA criteria: manifest, service worker, HTTPS context).
2. First-time visitors see a welcome message from Marshanta AI with a brief "how to order" guide.
3. Users can register and log in from within the conversational UI.
4. Returning users are recognized and greeted by name in the chat.

## Tasks / Subtasks

- [x] PWA bootstrap (AC: 1)
  - [x] App manifest with name, icons, start URL, display mode (`apps/web/manifest.webmanifest`)
  - [x] Service worker with basic caching strategy and offline page (`apps/web/service-worker.js`, `apps/web/offline.html`)
  - [x] Install prompt handling via `beforeinstallprompt` in `apps/web/main.js`
- [x] Welcome flow (AC: 2)
  - [x] Detect first-time vs returning session (localStorage `onboarded`)
  - [x] Render AI welcome + short ordering instructions (`say(...)` in `apps/web/main.js`)
- [x] Auth onboarding within chat (AC: 3, 4)
  - [x] Chat prompts to register/login (UI controls wired in `apps/web/index.html` + handlers in `apps/web/main.js`)
  - [x] Hand off to auth endpoints from Story 1.2 (`/auth/register`, `/auth/login`)
  - [x] On success, store session and greet user by name on return (persist `lastUserEmail`)

## Dev Notes

- Source reference:
  - `docs/architecture/high-level-architecture.md` (PWA architecture, auth integration)
  - `docs/front-end-spec/introduction.md` (UX goals), `docs/front-end-spec/information-architecture-ia.md` (IA)
- Keep UI minimal and conversational; avoid heavy UI scaffolding beyond PWA baseline.
- Respect auth abstractions defined in Story 1.2; do not pick libraries here.

### Testing

- Lighthouse PWA checks: installable, service worker, manifest.
- First-time vs returning user flow e2e.
- Auth happy/edge paths from chat prompts.

## Change Log

| Date | Version | Description | Author |
| :--- | :------ | :---------- | :----- |
| 2025-08-15 | 1.0 | Initial draft of Story 2.1 | PO |

## Dev Agent Record

### Agent Model Used



### Debug Log References



### Completion Notes List

